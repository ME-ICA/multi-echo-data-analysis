
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Acquiring Multi-Echo Data &#8212; Multi-Echo fMRI Data Analysis</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/myfile.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Processing Multi-Echo Data" href="Processing_Multi_Echo_Data.html" />
    <link rel="prev" title="Open Multi-Echo Datasets" href="Multi_Echo_Datasets.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Multi-Echo fMRI Data Analysis</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Multi-Echo (fMRI) Data Analysis
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Course Overview
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Course_Overview.html">
   Course Overview
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="00_Download_Data.html">
   Download Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Install_Software.html">
   Install Software
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Recommended_Reading.html">
   Recommended Reading
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Theoretical Background
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="MR_Physics.html">
   MR Physics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fMRI_Sequences.html">
   Multi-Echo fMRI Sequences
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Signal_Decay.html">
   Signal Decay
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="TE_Dependence.html">
   BOLD, non-BOLD, and TE-dependence with tedana
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="plot_approach_figures.html">
   Generate tedana walkthrough figures
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Practical Resources
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Multi_Echo_Datasets.html">
   Open Multi-Echo Datasets
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Acquiring Multi-Echo Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Processing_Multi_Echo_Data.html">
   Processing Multi-Echo Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Analysis Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01_Optimal_Combination_with_t2smap.html">
   Optimal combination with
   <code class="docutils literal notranslate">
    <span class="pre">
     t2smap
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02_Volume-wise_T2star_estimation_with_t2smap.html">
   Volume-wise T2*/S0 estimation with
   <code class="docutils literal notranslate">
    <span class="pre">
     t2smap
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_Denoising_with_tedana.html">
   Multi-Echo Denoising with
   <code class="docutils literal notranslate">
    <span class="pre">
     tedana
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_Dual_Echo_Denoising.html">
   Dual-Echo Denoising with
   <code class="docutils literal notranslate">
    <span class="pre">
     nilearn
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_3dMEPFM.html">
   3dMEPFM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06_Cerebrovascular_Reactivity_Mapping.html">
   Cerebrovascular Reactivity Mapping
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_Manual_Classification_with_rica.html">
   Manual Classification with
   <code class="docutils literal notranslate">
    <span class="pre">
     rica
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08_ICA_Based_Denoising.html">
   Denoising Data with ICA
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Final Thoughts
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="bibliography.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="build_information.html">
   Build Information
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="glossary.html">
   Glossary
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../_sources/content/Acquiring_Multi_Echo_Data.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/content/Acquiring_Multi_Echo_Data.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ME-ICA/multi-echo-data-analysis"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ME-ICA/multi-echo-data-analysis/issues/new?title=Issue%20on%20page%20%2Fcontent/Acquiring_Multi_Echo_Data.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ME-ICA/multi-echo-data-analysis/main?urlpath=tree/content/content/Acquiring_Multi_Echo_Data.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#available-multi-echo-fmri-sequences">
   Available multi-echo fMRI sequences
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#siemens">
     Siemens
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ge">
     GE
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#philips">
     Philips
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-available-multi-echo-mri-sequences">
   Other available multi-echo MRI sequences
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#acquisition-parameter-recommendations">
   Acquisition parameter recommendations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#me-fmri-parameters">
   ME-fMRI parameters
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="acquiring-multi-echo-data">
<h1>Acquiring Multi-Echo Data<a class="headerlink" href="#acquiring-multi-echo-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="available-multi-echo-fmri-sequences">
<h2>Available multi-echo fMRI sequences<a class="headerlink" href="#available-multi-echo-fmri-sequences" title="Permalink to this headline">¶</a></h2>
<p>We have attempted to compile some basic multi-echo fMRI protocols in an <a class="reference external" href="https://osf.io/ebkrp/">OSF project</a>.
The parameter choices in these protocols run and seem reasonable, but they have
not been optimized for a specific situation.
They are a good starting point for someone designing a study, but should not be
considered canonical.
If you would like to use one of them, please customize it for your own purposes
and make sure to run pilot scans to test your choices.</p>
<div class="section" id="siemens">
<h3>Siemens<a class="headerlink" href="#siemens" title="Permalink to this headline">¶</a></h3>
<p><strong>For Siemens users</strong>, there are two options for Works In Progress (WIPs) Sequences.</p>
<ul class="simple">
<li><p>The Center for Magnetic Resonance Research at the University of Minnesota
provides a custom MR sequence that allows users to collect multiple echoes
(termed <strong>Contrasts</strong>). The sequence and documentation can be <a class="reference external" href="https://www.cmrr.umn.edu/multiband/">found here</a>.
For details on obtaining a license follow
<a class="reference external" href="http://license.umn.edu/technologies/cmrr_center-for-magnetic-resonance-research-software-for-siemens-mri-scanners">this link</a>.
By default the number of contrasts is 1, yielding a single-echo sequence.
In order to collect multiple echoes, increase number of Contrasts on the
<strong>Sequence Tab, Part 1</strong> on the MR console.</p></li>
<li><p>The Martinos Center at Harvard also has a MR sequence available, with the details
<a class="reference external" href="https://www.nmr.mgh.harvard.edu/software/c2p/sms">available here</a>.
The number of echoes can be specified on the <strong>Sequence, Special</strong> tab in this sequence.</p></li>
</ul>
</div>
<div class="section" id="ge">
<h3>GE<a class="headerlink" href="#ge" title="Permalink to this headline">¶</a></h3>
<p><strong>For GE users</strong>, there are currently two sharable pulse sequences:</p>
<ul class="simple">
<li><p>Multi-echo EPI (MEPI) – Software releases: DV24, MP24 and DV25 (with offline recon)</p></li>
<li><p>Hyperband Multi-echo EPI (HyperMEPI) - Software releases: DV26, MP26, DV27, RX27
(here hyperband can be deactivated to do simple Multi-echo EPI – online recon)</p></li>
</ul>
<p>Please reach out to the GE Research Operation team or each pulse sequence’s
author to begin the process of obtaining this software.
More information can be found on the <a class="reference external" href="https://collaborate.mr.gehealthcare.com">GE Collaboration Portal</a>.</p>
<p>Once logged in, go to Groups &gt; GE Works-in-Progress you can find the description
of the current ATSM (i.e. prototypes).</p>
</div>
<div class="section" id="philips">
<h3>Philips<a class="headerlink" href="#philips" title="Permalink to this headline">¶</a></h3>
<p><strong>For Philips users</strong>, sequences can be defined using product software.</p>
<p>Multi-echo EPI (ME-EPI) can be acquired using the product software and can be combined with
SENSE parallel imaging and MultiBand.
The combination with MultiBand requires a SW release &gt;R5.1 and MultiBand functionality to be present.
No default ME-EPI are provided, but existing single-echo EPI sequences from the BOLD fMRI folder can be
modified into multi-echo sequences by increasing the number of echoes.
As a starting point to develop a 3 echo EPI protocol start by opening the default fMRI protocol and
modify the following: increase number of echoes to 3 on the Contrast tab, set SENSE = 3, MB-SENSE = 3,
set to 3mm isotropic voxels and adjust TEs to your preference.</p>
</div>
</div>
<div class="section" id="other-available-multi-echo-mri-sequences">
<h2>Other available multi-echo MRI sequences<a class="headerlink" href="#other-available-multi-echo-mri-sequences" title="Permalink to this headline">¶</a></h2>
<p>In addition to ME-fMRI, other MR sequences benefit from acquiring multiple
echoes, including T1-weighted imaging (MEMPRAGE) and susceptibility weighted imaging.
While most of these kinds of sequences fall outside the purview of this documentation,
quantitative T2* mapping is relevant since a baseline T2* map is used in several
processing steps including :ref:<code class="docutils literal notranslate"><span class="pre">optimal</span> <span class="pre">combination</span></code>.
While the T2* map estimated directly from fMRI time series is noisy, no current
study quantifies the benefit to optimal combination or tedana denoising if a
higher quality T2* map is used.
Some benefit is likely, so, if a T2* map is independently calculated, it can be
used as an input to many functions in the tedana workflow.</p>
<p>.. warning::
While tedana allows the input of a T2* map from any source, and a more
accurate T2* map should lead to better results, this hasn’t been
systematically evaluated yet.</p>
<p>There are many ways to calculate T2* maps, with some using multi-echo acquisitions.
We are not presenting an expansive review of this literature here,
but <a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2012.01.053">Cohen-Adad et al. (2012)</a>
and <a class="reference external" href="https://doi.org/10.1016/j.ejro.2018.12.006">Ruuth et al. (2019)</a> are good places to start
learning more about this topic.</p>
</div>
<div class="section" id="acquisition-parameter-recommendations">
<h2>Acquisition parameter recommendations<a class="headerlink" href="#acquisition-parameter-recommendations" title="Permalink to this headline">¶</a></h2>
<p>There is no empirically tested best parameter set for multi-echo fMRI acquisition.
The guidelines for optimizing parameters are similar to single-echo fMRI.
For multi-echo fMRI, the same factors that may guide priorities for single echo
fMRI sequences are also relevant.
Choose sequence parameters that meet the priorities of a study with regards to spatial resolution,
spatial coverage, sample rate, signal-to-noise ratio, signal drop-out, distortion, and artifacts.</p>
<p>A minimum of 3 echoes is required for running the current implementation fo TE-dependent denoising in
<code class="docutils literal notranslate"><span class="pre">tedana</span></code>.
It may be useful to have at least one echo that is earlier and one echo that is later than the
TE one would use for single-echo T2* weighted fMRI.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is in contrast to the <strong>dual echo</strong> denoising method which uses a very early (~5ms)
first echo in order to clean data. For more information on this method, see
<a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3518782/">Bright and Murphy (2013)</a>.</p>
</div>
<p>More than 3 echoes may be useful, because that would allow for more accurate
estimates of BOLD and non-BOLD weighted fluctuations, but more echoes have an
additional time cost, which would result in either less spatiotemporal coverage
or more acceleration.
Where the benefits of more echoes balance out the additional costs is an open research question.</p>
<p>We are not recommending specific parameter options at this time.
There are multiple ways to balance the slight time cost from the added echoes that have
resulted in research publications.
We suggest new multi-echo fMRI users examine the :ref:<code class="docutils literal notranslate"><span class="pre">spreadsheet</span> <span class="pre">of</span> <span class="pre">publications</span></code> that use
multi-echo fMRI to identify studies with similar acquisition priorities,
and use the parameters from those studies as a starting point.
More complete recommendations and guidelines are discussed in the
<a class="reference external" href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0173289">appendix of Dipasquale et al. (2017)</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to increase the number of contrasts (“echoes”) you may need to first increase the TR, shorten the
first TE and/or enable in-plane acceleration.
For typically used parameters see the <strong>ME-fMRI parameters</strong> section below.</p>
</div>
</div>
<div class="section" id="me-fmri-parameters">
<h2>ME-fMRI parameters<a class="headerlink" href="#me-fmri-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following section highlights a selection of parameters collected from published papers that have
used multi-echo fMRI.
You can see the spreadsheet of publications at
<a class="reference external" href="https://docs.google.com/spreadsheets/d/1WERojJyxFoqcg_tndUm5Kj0H1UfUc9Ban0jFGGfPaBk/edit#gid=0">spreadsheet of publications</a>.</p>
<p>The following plots reflect the average values for studies conducted at 3 Tesla.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># TODO: deal with the issue that the plot doesn&#39;t regenerate (ie isn&#39;t alive)</span>
<span class="c1"># Unless the code is updated.</span>
<span class="n">metable</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s1">&#39;https://docs.google.com/spreadsheets/d/1WERojJyxFoqcg_tndUm5Kj0H1UfUc9Ban0jFGGfPaBk/export?gid=0&amp;format=csv&#39;</span><span class="p">,</span>
    <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">TEs</span> <span class="o">=</span> <span class="p">[</span><span class="n">metable</span><span class="o">.</span><span class="n">TE1</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">metable</span><span class="o">.</span><span class="n">TE2</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">metable</span><span class="o">.</span><span class="n">TE3</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">metable</span><span class="o">.</span><span class="n">TE4</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">metable</span><span class="o">.</span><span class="n">TE5</span><span class="o">.</span><span class="n">mean</span><span class="p">()]</span>
<span class="n">TE_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;TE1&#39;</span><span class="p">,</span> <span class="s1">&#39;TE2&#39;</span><span class="p">,</span> <span class="s1">&#39;TE3&#39;</span><span class="p">,</span> <span class="s1">&#39;TE4&#39;</span><span class="p">,</span> <span class="s1">&#39;TE5&#39;</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">TEs</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Echo Times&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">pub_count</span> <span class="o">=</span> <span class="n">metable</span><span class="o">.</span><span class="n">TE1</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span> <span class="s1">&#39;Average from </span><span class="si">{}</span><span class="s1"> studies&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pub_count</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Echo Number&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Echo Time (ms)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">metable</span><span class="o">.</span><span class="n">TR</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Repetition Times&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Repetition Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">x_vox</span> <span class="o">=</span> <span class="n">metable</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">y_vox</span> <span class="o">=</span> <span class="n">metable</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">z_vox</span> <span class="o">=</span> <span class="n">metable</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">([</span><span class="n">x_vox</span><span class="p">,</span> <span class="n">y_vox</span><span class="p">,</span> <span class="n">z_vox</span><span class="p">],</span><span class="mi">0</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Voxel Dimensions&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Average Voxel dimension (mm)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Acquiring_Multi_Echo_Data_1_0.png" src="../_images/Acquiring_Multi_Echo_Data_1_0.png" />
<img alt="../_images/Acquiring_Multi_Echo_Data_1_1.png" src="../_images/Acquiring_Multi_Echo_Data_1_1.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/ipykernel_launcher.py:30: RuntimeWarning: Mean of empty slice
</pre></div>
</div>
<img alt="../_images/Acquiring_Multi_Echo_Data_1_3.png" src="../_images/Acquiring_Multi_Echo_Data_1_3.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="Multi_Echo_Datasets.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Open Multi-Echo Datasets</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Processing_Multi_Echo_Data.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Processing Multi-Echo Data</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By The tedana community<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>